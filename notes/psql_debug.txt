dpkg -l | grep postgres

sudo apt install postgis
sudo apt remove postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6 postgresql-9.6-postgis-2.5-scripts postgresql-9.6-postgis-2.5 postgresql-9.6

sudo apt remove postgresql-9.6 postgresql-client-9.6 postgresql-contrib-9.6 postgresql-9.6-postgis-3-scripts postgresql-9.6-postgis-3 postgresql-9.6



sudo systemctl restart postgresql.service
service postgresql status
pg_lsclusters

pg_lsclusters 10 main start

# See log
sudo tail -n 20 /var/log/postgresql/postgresql-9.6-main.log


which psql

sudo vim /etc/postgresql/9.6/main/pg_hba.conf

sudo apt-get install postgresql-10-postgis-2.4 && apt-get install postgresql-10-postgis-2.4-scripts

sudo pg_ctlcluster 10 main start


systemctl status postgresql@10-main.service


sudo add-apt-repository "deb http://apt.postgresql.org/pub/repos/apt/ xenial-pgdg main"
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo apt-get update
sudo apt-get install postgresql-9.6
sudo apt install postgresql-9.6-postgis-2.5-scripts

sudo apt install postgresql-9.6-postgis-scripts


wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
echo "deb http://apt.postgresql.org/pub/repos/apt/ bionic-pgdg main" | sudo tee -a /etc/apt/sources.list.d/postgres.list
sudo apt-get update
sudo apt-get install postgresql-9.6-postgis && apt-get install postgresql-9.6-postgis-scripts

psql -d postgres -U postgres -c 'select postgis_version()'
psql -d postgres -U postgres -c 'alter extension postgis update to "3"'
# List postgis extensions
psql -d postgres -U postgres -c '\dx'


psql -U postgres -c "create extension postgis" -d testdb

sudo tail -n 20 /var/log/postgresql/postgresql-10-main.log

## 10

sudo apt remove libpostgresql-jdbc-java postgresql-10 postgresql-10-postgis-2.4 postgresql-10-postgis-2.4-scripts postgresql-client-10
sudo apt-get install postgresql-10-postgis-2.5 && apt-get install postgresql-10-postgis-scripts-2.5

# Changing ports
sudo service postgresql stop
pg_lsclusters
sudo service postgresql start

# Bugs
## E: Could not open lock file /var/lib/dpkg/lock-frontend
https://itsfoss.com/could-not-get-lock-error/

# Solution to run pg
sudo tail -n 20 /var/log/postgresql/postgresql-10-main.log
> access denied pg_hba.conf
sudo chown postgres:postgres /etc/postgresql/10/main/pg_hba.conf
sudo service postgresql stop
sudo service postgresql start

# Change password
